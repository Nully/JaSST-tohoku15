# JaSST 15 東北

## アジェンダ

- オープニング
- アイスブレーク
- 基調講演 + レビューワーク
- 事例発表
- スポンサーライトニングトーク
- 招待講演 + ライブレビュー
- 振り返り
- クロージング

***

## 1. オープニング

開催は3回目

東北はもともとなかったけど、3回目開催できたのチョー良かった

参加者64名

全体で80名（登壇者、委員会、ゲスト含）

今年のテーマは「**レビューフェスタ**」〜レビューのちからを引き出そう〜

***ナベさんが64番目で本をもらったｗｗｗｗｗｗｗｗｗｗｗｗ***


松尾さん（Cookpad）をはったおすと、明日からCookpad使えなくなるよ！


**レビューは銀の弾丸ではない**


ドキュメントレビューをしている割合は参加者の81%

コードレビューは62%


## 2. アイスブレーク

自分のレビューにおける関心ごと・悩み、小ネタ

```
みんなが抱えている問題意識は似通っていて、言葉が通じなかったり、意図しない形で伝わたり、いつの間にかDisりあいが始まってしまって、収集がつかなくなる。
```


## 3. 基調講演 + レビューワーク

（株）HBA Quosal　安達 賢二さん

SIer屋さん

目標QCD不達成の原因「要件定義工程」がダントツで問題担っている。

不具合発生率は「製造上の不具合」「企画要求仕様の不具合」が高い割合を占めている

### レビューとは？

レビューはたくさんの対象を持つことができる

- 毛感を検出する
- 対象ソフトウェアの品質レベルが十分であることを確認する
- 意思決定のための情報を示す
- 欠陥の作りこみを防ぐ

昔は「欠陥を検出する」だったが、現在は「ライフスタイルやビジネススタイルを変える」ことへ変化している

```レビューは大方、欠陥を検出する``` ことが目的になってしまう

### どうしてレビューは必要なのか？

#### 要求

- 完全であることが求められる
- 規模が大きくなる

#### 現実

- 完璧な人間はいない
- チームで作り上げる必要がある

```
作っているのは人間
```

人間は自分が持っているニーズを自ら発言するのが難しい。
それ故、レビューの際も書いてあることベースで話をしてしまう。

### 抜け漏れ+余計なものの検出

- 表現してある内容から表現していないことを察知する
- 様々視点と構造から表現できていないことを察知する

### 上流工程でバグを検出するのがよい？

リードタイムが長くなるほど、手戻り工数が膨らむ

作りこんだ欠陥/発生した問題はできるだけ早く、確実に、そして効率的に除去することが大事。
だが、これができたとしても「役に立たないものを作りこんでいく」可能性が出てくる。


### レビューの効果

生産性が向上する === コミュニケーションが良くなる（良くする）

```
守備範囲を固く広く守れる体制を作れるレビューがベスト
```

関係者による対象や背景などの **理解・認識をあわせる** 場

- 自己責任の放棄・他社責任への転嫁（甘え）
- 過剰な自己防衛
- 吊し上げ・個人攻撃


```
これらはすべてコスト超過・納期遅延につながるし、チーム状態の結果が良くなくなる。
```

### レビューの問題構造

なんとなくレビューすると「視野の狭いレビュー」になりがちになる。


```
思いつきで短い時間で適切な的確なレビューができる人は無いに等しい
```

**レビュイーはドキュメントやコードを構造化することで検出率は格段に上がる。**


```
レビューはテストやレビュー以前の段階でより良くなる。
```


#### レビュー開始基準

- 見てもらいたいものを言えるか
- レビューは相談の場ではない（本来開発工数に入れるべき）


#### レビューの目的

レビューの視点の立ち位置

観点の体系化→目的の明確化

例）「危険」にもいくつかの危険があり、「転倒」「やけど」「感電」など

危険を例に上げると、粒度が粗いものから細かいものへ落とすことができる。
または、人によって掘り下げる必要がある。


```
「最上位観点」は目的のサブセットである
```


### レビュータイプ・技法のお話

インスペクションレビューを簡素化したのがチームレビュー

「AgileInspection」

**確認シナリオを明確化する**


「表現形式を変える」


表現方法は「画像で見せる」「言葉で伝える」など、様々な確認方法がある。

お互いの意識をすりあわせるために表現方法を変換し、すり合わせることで意思統一が図りやすくなる。

「いじわる漢字」


>
> レビュー時はエゴをなくそう。
>

「テストアナリストシラバス」

```
主語の視点を「自分自身」にすることで刺がなくなり、お互い分かり合える
```

**振り返りはレビュー直後に行うと効果が大きいのでぜひ試しましょう**

「レビュー観点は作業をする際の観点」

***

## Cookpad - 事例発表

デザインレビューとコードレビューをやってる

#### レビューの効果

- 情報共有
- 責任の分散
- 学習
- 成果物・外部品質の工場

これらは特定のレビュー携帯に限らない。

#### レビューの課題

- 人件費
- レビュー負荷

```
注力箇所はコード上の誤りと◯◯◯◯に注力している。
```

**気づく仕組みを作った**

- 人による確認
- チェックリストを作る（ドメインロジック部分の留意点も書く）
- 静的解析（Dokumi Jenkins Plugin）

「エンジニアはGithubに集中する」


**見るべきものの分散は人の負荷になる**

```
機械が行えるものは機械に任せ、継続することは基本的に分散させない。
```

***

## 効率的なレビューの運用 - 事例発表

※ ドキュメントを対象としてレビュー

思い手続きを何とかするしか現状ないｗ

開発をなくすことなんてできない...

### 実際にどうするか

- レビュー会を減らす
- 議事録をなくす（粒度を荒く）
- 修正確認・記録を簡素化する

#### 人が集まらなくてもいい方法は？

- BTSに「レビュー中」を追加
- メールでレビューする人に通知
- 一括レビューより期限より長くする

#### レビュー会はなくなったのか？

認識合わせが必要な場合だけレビュー会を開く

#### 議事録をなくす

でも、議事録を全く無いのはまずいから、BTSとかにまとめておく

#### 確認作業を簡素化する

BTSとレポジトリの連携がもともと出来たのでそれで対応したった。


***

## 達人の指摘から学ぶレビューのポイント - 事例発表

不具合 > レビューの指摘

印象としては「不具合」が印象に残りやすい

チームが異なると、ドメイン知識が不足してしまい、レビューしづらくなる。
でもレビューしないと行けない。

「そうだ、達人から学ぼう！」

```
(ﾟ∀ﾟ)ﾗｳﾞｨ!!
```

**指摘から観点とキーワードを導出**

マインドマップなどを用いて導出する。

**わからないことは放置しない**

- わからないことは達人（作った人）に直接聞く
- ドキュメントがある場合は、ドキュメントを確認し、全体を明確にする

「実は学習のプロセス」と同じだった

- 経験
- 振り返り
- 抽象化
- 実施

これは繰り返されるもの

不具合に比べ活用が少ないレビュー指摘は実は宝の山である

達人のレビューの指摘を観点とキーワードに分けて知りすることで、自分の次回のレビュー時の助けとなる。

***

## 「納品の無い受諾開発」を支えるコードレビューの取り組み

日本を代表する「倉貫さん」と日本を代表するエンジニア「西見さん」

```
プログラムを書くことはこの世にないものを作り出す行為
```

参考：http://remotty.net（開発者募集中！）

見積もり辛いよねｗｗｗ
営業勝手に決めるしｗｗｗ
なんなのもうｗｗｗ

### 開発体制

- 月額定額制
- 顧問としてすべての工程を担当
- 働く時間でなく、成果を提供
- ビジネスの成長をITで支える

### 嬉しい事

- 要件定義なし
- 仕様変更はいつでもできる
- 直接エンジニアに相談できる
- 作らない提案をしてもらえる

```
仕様変更はビジネス価値として正しい選択をしただけ
エンジニアをぬっころしたいわけではない
```

### 圧倒的な飛鳥大綱化を実現

- ドキュメントは一切作らない
- お客さんのところには訪問しない
- 営業担当はいません
- 納期を死守する約束はできません

### 納品をなくした理由

- 発注者と受注者のゴールが違う
- あとで直せないから詰め込む要求
- 生産性が低いほど、高くなる見積もり
- 使う価値よりも、要件定義に従う

### 新規事業に無体開発が無い

- 小さく初めてから大きく育てたい
- 事業の成長に合わせて改修したい
- 内製はエンジニアの見極めが困難
- SIerは要件定義が必要で金額が高い

### ビジネスの成長をささえるパートナー

- 要件の予測は困難で日々変化する
- ユーザーが使い始めてからがスタート
- システムの完成は目指していない
- 長期的視野と経営視点を持つこと

## プロセスについて

### 作らなくて住むなら作らない

- ビジネスモデルとビジョンの共有
- 何のために作るのか？を追求
- コストと期間を固定し、機能を調整
- 3ヶ月でできるものにフォーカス ★

### 完成させることを目指さない

- 毎週定例MTGを行って開発が進む
- 定例会の中で確認と設計をする
- 常に動くソフトウェアで確認する
- 正しい仕様は現在動いているもの ★仕様の食い違いは発生するのか？発生した場合、どうやって解決しているのか？

```
設計の本質は「何を作るのか」、仕組みの話であって、設計 == 仕様ではない
```

## コードレビュー

### 持続して変化できること

- 常に仕様を追加/変更できること
- 常に本番リリース可能であること
- スピード感を持ち開発できること
- 不具合はすぐ修正可能であること

```
スピード感を持って開発することは開発速度自体を早くするだけではなく、メンテナブルであること
```

### 外的環境からも変化は求め続けられる


### 特性を満たすための技術的な戦略

- ソフトウェアはクラウドで運用
- 言語・FWの統一
- すべての設定をソースコードで表現
- 技術的要素共通化による知見の共有

```
ソースコードですべて回すことが可能
```

### コードレビューへ変化

ペアプロからコードレビューへ変化し、コードレビューで理解し合えることがわかった。

```
ペアプロやコードレビューは人の目が入ることで、コードの品質を向上することができる。
また、教育を目的とした学習をすることもできる
```

### 誰がコードレビューをするのか

- 一人前がコードレビュー
- コードの良し悪しはそれなりのレベルのある人間にしかわからない
- 一人前は「良いコード」とは何かの共通認識を持っている

```
いいコードの共通認識を醸成していく
```

**ランチタイムディスカッションを使って共通認識を醸成する**

- 価値観が異なる
- 良いコードの共通意識が無い

### コードレビューのタイミング

- ローンチ前の全体レビュー
- 本番リリース前
-- リリース前レビューは毎回実施

**サービスローンチ前に1時間くらいでやってる**

### レビューの観点

- 意図を汲み取れるソースコードか
- テストコードは書かれているか
- リリース時に問題が起こらないか
- 障害児リカバリは考えているか
- 環境周りの変更はないか

```
読みにくいと正直に言う
```

### 良いコードの共通認識

- DRY
- YAGNI（シンプルに実装）
- 意図の伝わるコード
- フレームワークWAYである

```
YAGNIはシンプルに実装することであって、プロジェクトとして必要ないからやらない！と否定することではない
```

### コードレビューの7つの秘訣

- レビューの観点を明確にする
- 我が身に帰ることを恐れずに指摘すること（自分もやることだけど、相手にも指摘してあげる）
- なぜ悪いコードなのかを論理的に説明すること
- いいコードに付いて共通認識を持つこと
- 小さい単位でレビューを繰り返す
- 指摘や素直な気持ちで受け入れること
- 指摘は人格否定で無いことを理解すること

**後ほどSlideShareにて**

### コードレビュー実践のために大事なこと

- 自分たちの開発プロセスに適したレビュー観点を設定する
- レビュー観点に基づくいいコードの共通認識をチームで持つ
- レビューは小口化し継続的にする

```
人の目を入れることで腐らせてはいけない
```
















